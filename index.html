<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pet Pooja Home Kitchen | Takeaway</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    
    body { background-color: #f4f4f4; color: #333; }

    /* Header & Branding */
    .top-nav { background: #fff; padding: 15px 5%; border-bottom: 3px solid #e67e22; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; }
    .brand-name { font-size: 1.5rem; font-weight: 800; color: #e67e22; text-transform: uppercase; }
    .location-tag { font-size: 0.8rem; font-weight: 600; color: #666; }

    header { background: #fff; padding: 40px 5%; text-align: center; margin-bottom: 20px; }
    header h1 { font-size: 2.2rem; color: #222; margin-bottom: 10px; }
    header p { color: #777; font-weight: 500; }

    .container { max-width: 1100px; margin: auto; padding: 0 20px 80px; }

    /* Order History Alert */
    #historyBox { 
      background: #fff3cd; border: 2px solid #ffeeba; padding: 20px; border-radius: 10px; 
      margin-bottom: 30px; display: none; 
    }
    #historyBox h3 { color: #856404; font-size: 1rem; margin-bottom: 10px; text-transform: uppercase; }

    /* Menu Styling */
    .section-title { margin: 30px 0 20px; font-size: 1.5rem; border-left: 5px solid #e67e22; padding-left: 15px; }
    
    .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
    .food-card { background: #fff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 1px solid #ddd; }
    .food-img { width: 100%; height: 180px; object-fit: cover; }
    .food-info { padding: 15px; text-align: center; }
    .food-info h3 { font-size: 1.1rem; margin-bottom: 10px; }
    .food-price { font-size: 1.2rem; font-weight: 800; color: #e67e22; margin-bottom: 15px; display: block; }
    
    .add-btn { 
      background: #e67e22; color: white; border: none; width: 100%; padding: 10px; 
      border-radius: 6px; font-weight: 700; cursor: pointer; text-transform: uppercase; 
    }
    .add-btn:hover { background: #d35400; }

    /* Order Section */
    .order-interface { display: grid; grid-template-columns: 1fr 380px; gap: 30px; margin-top: 40px; }
    @media (max-width: 850px) { .order-interface { grid-template-columns: 1fr; } }

    .white-box { background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .cart-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
    .qty-controls button { width: 30px; height: 30px; border: 1px solid #ccc; background: #fff; font-weight: 800; cursor: pointer; }

    /* Form Styling */
    input, textarea { width: 100%; padding: 12px; margin: 10px 0 20px; border: 2px solid #eee; border-radius: 8px; font-size: 1rem; }
    input:focus { border-color: #e67e22; outline: none; }

    .whatsapp-btn { 
      background: #25D366; color: white; border: none; width: 100%; padding: 15px; 
      border-radius: 8px; font-size: 1.1rem; font-weight: 800; cursor: pointer; 
      display: flex; align-items: center; justify-content: center; gap: 10px;
    }

    footer { background: #222; color: #fff; text-align: center; padding: 40px 20px; margin-top: 50px; }
  </style>
</head>
<body>

<div class="top-nav">
  <div class="brand-name">Pet Pooja</div>
  <div class="location-tag"><i class="fas fa-map-marker-alt"></i> Sanskriti Apartment</div>
</div>

<header>
  <h1>Pet Pooja Home Kitchen</h1>
  <p>Authentic Homemade Food | Takeaway Only</p>
</header>

<div class="container">
  
  <div id="historyBox">
    <h3><i class="fas fa-history"></i> Your Recent Order (Last 30 Mins)</h3>
    <div id="historyItems"></div>
  </div>

  <h2 class="section-title">Today's Menu</h2>
  <div class="menu-grid" id="menuArea"></div>

  <div class="order-interface">
    <div class="white-box">
      <h3 style="margin-bottom: 20px; border-bottom: 2px solid #f4f4f4;">Your Basket</h3>
      <div id="cartItems">
        <p style="text-align:center; color:#999; padding: 20px;">No items selected.</p>
      </div>
      <div style="display:flex; justify-content:space-between; margin-top: 20px; font-size: 1.5rem; font-weight: 800;">
        <span>Grand Total:</span>
        <span style="color:#e67e22;">₹<span id="grandTotal">0</span></span>
      </div>
    </div>

    <div class="white-box">
      <h3 style="margin-bottom: 20px; border-bottom: 2px solid #f4f4f4;">Pickup Details</h3>
      <form onsubmit="placeOrder(event)">
        <label><b>Your Name</b></label>
        <input type="text" id="custName" placeholder="Full Name" required>
        
        <label><b>Phone Number</b></label>
        <input type="tel" id="custPhone" placeholder="10-digit Mobile" required>
        
        <label><b>Special Instructions</b></label>
        <textarea id="custNote" rows="2" placeholder="Spice level, timing, etc."></textarea>

        <button type="submit" class="whatsapp-btn">
          <i class="fab fa-whatsapp"></i> SEND ORDER TO WHATSAPP
        </button>
      </form>
    </div>
  </div>
</div>

<footer>
  <p><b>Pet Pooja Home Kitchen</b></p>
  <p>Sanskriti Apartment, Delhi NCR</p>
  <p>Contact: +91 9015489060</p>
</footer>

<script>
  // Strictly matched menu items and correct images
  const menu = [
    { id: 1, name: "Paneer Masala Dosa", price: 120, img: "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?auto=format&fit=crop&w=500" },
    { id: 2, name: "Butter Masala Dosa", price: 100, img: "https://images.unsplash.com/photo-1589302168068-964664d93dc0?auto=format&fit=crop&w=500" },
    { id: 3, name: "Soft Idli Sambhar", price: 60, img: "https://images.unsplash.com/photo-1589301773521-cf9063301702?auto=format&fit=crop&w=500" },
    { id: 4, name: "Curry Rice Bowl", price: 80, img: "https://images.unsplash.com/photo-1546833999-b9f581602b70?auto=format&fit=crop&w=500" }
  ];

  let basket = {};

  function init() {
    // Render Menu
    const area = document.getElementById('menuArea');
    area.innerHTML = menu.map(item => `
      <div class="food-card">
        <img src="${item.img}" class="food-img">
        <div class="food-info">
          <h3>${item.name}</h3>
          <span class="food-price">₹${item.price}</span>
          <button class="add-btn" onclick="addToBasket(${item.id})">Add to Basket</button>
        </div>
      </div>
    `).join('');

    renderHistory();
  }

  function addToBasket(id) {
    if (basket[id]) basket[id].qty++;
    else basket[id] = { ...menu.find(i => i.id === id), qty: 1 };
    renderBasket();
  }

  function updateQty(id, amt) {
    basket[id].qty += amt;
    if (basket[id].qty <= 0) delete basket[id];
    renderBasket();
  }

  function renderBasket() {
    const box = document.getElementById('cartItems');
    const totalEl = document.getElementById('grandTotal');
    let total = 0, html = '';

    for (const id in basket) {
      const item = basket[id];
      total += item.price * item.qty;
      html += `
        <div class="cart-row">
          <div><b>${item.name}</b><br><small>₹${item.price} each</small></div>
          <div class="qty-controls">
            <button onclick="updateQty(${id}, -1)">-</button>
            <span style="margin: 0 10px; font-weight:700;">${item.qty}</span>
            <button onclick="updateQty(${id}, 1)">+</button>
          </div>
        </div>`;
    }
    box.innerHTML = html || '<p style="text-align:center; color:#999; padding: 20px;">No items selected.</p>';
    totalEl.innerText = total;
  }

  function placeOrder(e) {
    e.preventDefault();
    if (Object.keys(basket).length === 0) return alert("Please select items!");

    const name = document.getElementById('custName').value;
    const note = document.getElementById('custNote').value;
    let itemsText = "";
    let total = 0;

    for (const id in basket) {
      itemsText += `• ${basket[id].name} x ${basket[id].qty} (₹${basket[id].price * basket[id].qty})%0A`;
      total += basket[id].price * basket[id].qty;
    }

    // Save to localStorage for 30 min history
    const orderRecord = {
      summary: itemsText.replace(/%0A/g, "<br>"),
      total: total,
      time: new Date().getTime()
    };
    localStorage.setItem('petPoojaHistory', JSON.stringify(orderRecord));

    // WhatsApp Message
    const msg = `*PET POOJA HOME KITCHEN*%0A*Customer:* ${name}%0A*Order:*%0A${itemsText}%0A*Total:* ₹${total}%0A*Note:* ${note}`;
    window.open(`https://wa.me/919015489060?text=${msg}`, '_blank');

    // Page Refresh to Clear Cart & Show History
    setTimeout(() => { location.reload(); }, 1000);
  }

  function renderHistory() {
    const saved = localStorage.getItem('petPoojaHistory');
    if (!saved) return;

    const data = JSON.parse(saved);
    const now = new Date().getTime();
    if (now - data.time < (30 * 60 * 1000)) { // 30 mins
      document.getElementById('historyBox').style.display = 'block';
      document.getElementById('historyItems').innerHTML = `
        <div style="font-size: 0.9rem;">
          ${data.summary}
          <div style="margin-top:10px; font-weight:800; border-top: 1px solid #ddd; padding-top:5px;">
            Total: ₹${data.total}
          </div>
        </div>
      `;
    } else {
      localStorage.removeItem('petPoojaHistory');
    }
  }

  init();
</script>

</body>
</html>
